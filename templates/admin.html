<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            transition: background-color 0.3s, color 0.3s;
        }

        .admin-container {
            max-width: 1200px;
            margin: 80px auto 20px;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s;
        }

        /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ */
        .dark-theme {
            background-color: #222;
            color: #f4f4f4;
        }

        .dark-theme .admin-container {
            background-color: #333;
            border: 1px solid #444;
        }

        /* –ö–Ω–æ–ø–∫–∏ */
        .blue-btn, .red-btn, .green-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
            position: relative;
        }

        .blue-btn {
            background-color: #007BFF;
            color: white;
        }

        .red-btn {
            background-color: #dc3545;
            color: white;
        }
        
        .green-btn {
            background-color: #28a745;
            color: white;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        .blue-btn::after, .red-btn::after, .green-btn::after {
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            bottom: -2px;
            height: 2px;
            background-color: currentColor;
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .blue-btn:hover::after, .red-btn:hover::after, .green-btn:hover::after {
            transform: scaleX(1);
        }

        /* –ö–Ω–æ–ø–∫–∏ –≤ —à–∞–ø–∫–µ */
        .header-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        .news-list {
            margin-top: 30px;
            padding: 20px;
            background: var(--background-light);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }

        .news-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin: 10px 0;
            border: 1px solid var(--primary-blue);
            border-radius: 4px;
            transition: all 0.3s;
            background: var(--background-light);
        }

        /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è –Ω–æ–≤–æ—Å—Ç–µ–π */
        .dark-theme .news-list,
        .dark-theme .news-item {
            background: #333;
            border-color: #444;
            color: #f4f4f4;
        }

        .dark-theme .news-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .gallery {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }

        .preview-item {
            position: relative;
            width: 150px;
            height: 150px;
            border: 2px dashed var(--primary-blue);
            border-radius: 8px;
            overflow: hidden;
        }

        .preview-item img,
        .preview-item video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .remove-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px;
            border-radius: 5px;
            display: none;
            z-index: 1000;
        }

        .notification.show {
            display: block;
            animation: fadeInOut 4s;
        }

        .notification.success {
            background: #28a745;
            color: white;
        }

        .notification.error {
            background: #dc3545;
            color: white;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0; }
            10%, 90% { opacity: 1; }
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ */
        .action-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            overflow-y: auto;
        }
        
        .modal-content {
            background-color: #fff;
            margin: 5% auto;
            padding: 20px;
            border-radius: 8px;
            max-width: 800px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.25);
            position: relative;
        }
        
        .dark-theme .modal-content {
            background-color: #333;
            color: #f4f4f4;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: #777;
        }
        
        .dark-theme .close-modal {
            color: #aaa;
        }
        
        .close-modal:hover {
            color: #333;
        }
        
        .dark-theme .close-modal:hover {
            color: #fff;
        }
        
        .search-bar {
            margin-bottom: 20px;
            display: flex;
        }
        
        .search-bar input {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .dark-theme .search-bar input {
            background-color: #444;
            color: #fff;
            border-color: #555;
        }
        
        .modal-news-list {
            max-height: 60vh;
            overflow-y: auto;
        }
        
        .modal-news-item {
            padding: 15px;
            margin-bottom: 10px;
            border: 1px solid #eee;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .dark-theme .modal-news-item {
            border-color: #555;
        }
        
        .modal-news-item:hover {
            background-color: #f9f9f9;
        }
        
        .dark-theme .modal-news-item:hover {
            background-color: #444;
        }
        
        .modal-news-item h3 {
            margin-top: 0;
            margin-bottom: 8px;
        }
        
        .modal-news-item p {
            margin: 0;
            color: #666;
        }
        
        .dark-theme .modal-news-item p {
            color: #bbb;
        }
        
        .draft-item {
            padding: 15px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: #f8f9fa;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .dark-theme .draft-item {
            border-color: #555;
            background-color: #3a3a3a;
        }
        
        .draft-item:hover {
            background-color: #e9ecef;
        }
        
        .dark-theme .draft-item:hover {
            background-color: #444;
        }
        
        .draft-date {
            font-size: 12px;
            color: #6c757d;
            margin-top: 5px;
        }
        
        .dark-theme .draft-date {
            color: #aaa;
        }
        
        .draft-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
        }
        
        .draft-preview-item {
            width: 50px;
            height: 50px;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .draft-preview-item img, 
        .draft-preview-item video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .empty-drafts {
            text-align: center;
            padding: 20px;
            color: #6c757d;
        }
        
        .dark-theme .empty-drafts {
            color: #aaa;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .input-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            background: white;
            color: #333;
        }

        .dark-theme .input-group select {
            background: #444;
            color: #f4f4f4;
            border-color: #555;
        }

        .events-form {
            margin-top: 40px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .dark-theme .events-form {
            background: #333;
        }
        
        .featured-controls {
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .dark-theme .featured-controls {
            background: #333;
        }
        
        .featured-controls label {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body class="light-theme">
    <div class="header-controls">
        <button class="green-btn" onclick="goToHome()">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
        <button class="red-btn" onclick="logout()">–í—ã–π—Ç–∏</button>
        <button class="theme-toggle blue-btn" id="themeToggle">–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É</button>
    </div>
    
    <div id="notification" class="notification"></div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π -->
    <div id="deleteNewsModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h2>–£–¥–∞–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π</h2>
            
            <div class="search-bar">
                <input type="text" id="newsSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É..." oninput="filterNews()">
            </div>
            
            <div class="modal-news-list" id="modalNewsContainer">
                <!-- –°–ø–∏—Å–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —Å—é–¥–∞ -->
            </div>
            
            <div id="deleteConfirmation" class="delete-confirmation">
                <h3>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h3>
                <p>–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å "<span id="confirmationTitle"></span>"?</p>
                <div class="confirmation-buttons">
                    <button class="red-btn" onclick="confirmDelete()">–£–¥–∞–ª–∏—Ç—å</button>
                    <button class="blue-btn" onclick="cancelDelete()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ -->
    <div id="draftsModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeDraftsModal()">&times;</span>
            <h2>–ß–µ—Ä–Ω–æ–≤–∏–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π</h2>
            
            <div class="modal-news-list" id="draftsContainer">
                <!-- –°–ø–∏—Å–æ–∫ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —Å—é–¥–∞ -->
            </div>
        </div>
    </div>

    <div class="admin-container">
        <h1>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å</h1>
        <!-- –ü–æ–ª–µ –¥–ª—è –Ω–æ–≤–æ—Å—Ç–∏ -->
        <div class="input-group">
            <input type="text" id="news-title" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏" required>
            <textarea id="news-content" placeholder="–¢–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏..."></textarea>
            <button onclick="checkSpelling()" class="blue-btn">–ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏</button>
            <input type="text" id="hashtags" placeholder="#–Ω–æ–≤–æ—Å—Ç—å #–∫–æ–ª–ª–µ–¥–∂">
            
            <label for="news-category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
            <select id="news-category" required>
                <option value="general">–û–±—â–∏–µ</option>
                <option value="academic">–ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–µ</option>
                <option value="student_life">–°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∞—è –∂–∏–∑–Ω—å</option>
                <option value="sport">–°–ø–æ—Ä—Ç</option>
                <option value="culture">–ö—É–ª—å—Ç—É—Ä–∞</option>
                <option value="research">–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è</option>
                <option value="announcements">–û–±—ä—è–≤–ª–µ–Ω–∏—è</option>
            </select>
        </div>
        
        <div class="featured-controls">
            <h3>–û—Å–æ–±—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:</h3>
            <label>
                <input type="checkbox" id="is-featured">
                –°–¥–µ–ª–∞—Ç—å –≤–∞–∂–Ω—ã–º —Å–æ–±—ã—Ç–∏–µ–º (–æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –≤ –≥–µ—Ä–æ–µ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π)
            </label>
            <label>
                <input type="checkbox" id="is-popular">
                –°–¥–µ–ª–∞—Ç—å –ø–æ–ø—É–ª—è—Ä–Ω–æ–π –Ω–æ–≤–æ—Å—Ç—å—é (–æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏)
            </label>
        </div>
        
        <div class="gallery" id="mediaPreview"></div>

        <div class="media-section">
            <div class="upload-group">
                <h3>–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</h3>
                <input type="file" id="image-upload" accept="image/*" multiple hidden>
                <div class="gallery" id="image-gallery"></div>
                <button onclick="document.getElementById('image-upload').click()" class="blue-btn">
                    –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ
                </button>
            </div>

            <div class="upload-group">
                <h3>–í–∏–¥–µ–æ</h3>
                <input type="file" id="video-upload" accept="video/*" multiple hidden>
                <div class="gallery" id="video-gallery"></div>
                <button onclick="document.getElementById('video-upload').click()" class="blue-btn">
                    –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ
                </button>
            </div>
        </div>

        <div class="action-buttons">
            <button class="blue-btn" onclick="publishNews()">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
            <button class="blue-btn" onclick="saveDraft()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫</button>
            <button class="blue-btn" onclick="openDeleteModal()">–£–¥–∞–ª–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å</button>
            <button class="blue-btn" onclick="openDraftsModal()">–ü—Ä–æ—Å–º–æ—Ç—Ä —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤</button>
            <button class="red-btn" onclick="clearForm()">–û—á–∏—Å—Ç–∏—Ç—å</button>
        </div>
    </div>
    
    <div class="admin-container events-form">
        <h1>–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</h1>
        <div class="input-group">
            <input type="text" id="event-title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è" required>
            <textarea id="event-description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è..."></textarea>
            <input type="date" id="event-date" required>
            <input type="text" id="event-location" placeholder="–ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è" required>
            <button class="green-btn" onclick="addEvent()">–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</button>
        </div>
    </div>

    <div class="news-list">
        <h2>–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏</h2>
        <div id="newsContainer"></div>
    </div>
    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let newsData = {
            title: '',
            content: '',
            hashtags: [],
            media: [],
            category: 'general',
            is_featured: false,
            is_popular: false
        };
        
        let selectedNewsId = null;
        let allNews = [];
        let currentDraftId = null;

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤
        function openDraftsModal() {
            document.getElementById('draftsModal').style.display = 'block';
            loadDrafts();
        }
        
        function closeDraftsModal() {
            document.getElementById('draftsModal').style.display = 'none';
        }
        
        function loadDrafts() {
            const drafts = JSON.parse(localStorage.getItem('drafts')) || [];
            const container = document.getElementById('draftsContainer');
            container.innerHTML = '';
            
            if (drafts.length === 0) {
                container.innerHTML = '<div class="empty-drafts">–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤</div>';
                return;
            }
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É)
            drafts.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            drafts.forEach(draft => {
                const draftElement = document.createElement('div');
                draftElement.className = 'draft-item';
                draftElement.dataset.id = draft.id;
                draftElement.innerHTML = `
                    <h3>${draft.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'}</h3>
                    <p>${draft.content ? draft.content.substring(0, 150) + (draft.content.length > 150 ? '...' : '') : '–ù–µ—Ç —Ç–µ–∫—Å—Ç–∞'}</p>
                    <div class="draft-date">–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: ${new Date(draft.date).toLocaleDateString()}</div>
                `;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–µ–≤—å—é –º–µ–¥–∏–∞, –µ—Å–ª–∏ –µ—Å—Ç—å
                if (draft.media && draft.media.length > 0) {
                    const previewContainer = document.createElement('div');
                    previewContainer.className = 'draft-preview';
                    
                    draft.media.slice(0, 4).forEach(media => {
                        const previewItem = document.createElement('div');
                        previewItem.className = 'draft-preview-item';
                        
                        if (media.type === 'image') {
                            previewItem.innerHTML = `<img src="${media.url}" alt="–ü—Ä–µ–≤—å—é">`;
                        } else if (media.type === 'video') {
                            previewItem.innerHTML = `<video src="${media.url}" muted></video>`;
                        }
                        
                        previewContainer.appendChild(previewItem);
                    });
                    
                    draftElement.appendChild(previewContainer);
                }
                
                draftElement.addEventListener('click', () => {
                    loadDraftToForm(draft.id);
                });
                
                container.appendChild(draftElement);
            });
        }
        
        function saveDraft() {
            const title = document.getElementById('news-title').value;
            const content = document.getElementById('news-content').value;
            const hashtags = document.getElementById('hashtags').value;
            const category = document.getElementById('news-category').value;
            const isFeatured = document.getElementById('is-featured').checked;
            const isPopular = document.getElementById('is-popular').checked;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
            if (!title && !content && newsData.media.length === 0) {
                showNotification('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ —á–µ—Ä–Ω–æ–≤–∏–∫', 'error');
                return;
            }
            
            // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç —á–µ—Ä–Ω–æ–≤–∏–∫–∞
            const draft = {
                id: Date.now(), // –ò—Å–ø–æ–ª—å–∑—É–µ–º timestamp –∫–∞–∫ ID
                title,
                content,
                hashtags,
                category,
                is_featured: isFeatured,
                is_popular: isPopular,
                media: newsData.media.map(media => ({
                    type: media.type,
                    url: media.url
                })),
                date: new Date().toISOString()
            };
            
            // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏
            let drafts = JSON.parse(localStorage.getItem('drafts')) || [];
            
            // –ï—Å–ª–∏ —ç—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —á–µ—Ä–Ω–æ–≤–∏–∫–∞
            if (currentDraftId) {
                const index = drafts.findIndex(d => d.id === currentDraftId);
                if (index !== -1) {
                    drafts[index] = draft;
                }
            } else {
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π —á–µ—Ä–Ω–æ–≤–∏–∫
                drafts.push(draft);
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            localStorage.setItem('drafts', JSON.stringify(drafts));
            
            // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
            clearForm();
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —á–µ—Ä–Ω–æ–≤–∏–∫
            currentDraftId = null;
            
            showNotification('–ß–µ—Ä–Ω–æ–≤–∏–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω!', 'success');
        }
        
        function loadDraftToForm(draftId) {
            const drafts = JSON.parse(localStorage.getItem('drafts')) || [];
            const draft = drafts.find(d => d.id === draftId);
            
            if (!draft) {
                showNotification('–ß–µ—Ä–Ω–æ–≤–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
                return;
            }
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è
            document.getElementById('news-title').value = draft.title || '';
            document.getElementById('news-content').value = draft.content || '';
            document.getElementById('hashtags').value = draft.hashtags || '';
            document.getElementById('news-category').value = draft.category || 'general';
            document.getElementById('is-featured').checked = draft.is_featured || false;
            document.getElementById('is-popular').checked = draft.is_popular || false;
            
            // –û—á–∏—â–∞–µ–º —Ç–µ–∫—É—â–∏–µ –ø—Ä–µ–≤—å—é
            const mediaPreview = document.getElementById('mediaPreview');
            mediaPreview.innerHTML = '';
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø—Ä–µ–≤—å—é –º–µ–¥–∏–∞
            if (draft.media && draft.media.length > 0) {
                draft.media.forEach(media => {
                    const previewItem = document.createElement('div');
                    previewItem.className = 'preview-item';
                    
                    if (media.type === 'image') {
                        previewItem.innerHTML = `<img src="${media.url}" alt="–ü—Ä–µ–≤—å—é">`;
                    } else if (media.type === 'video') {
                        previewItem.innerHTML = `<video src="${media.url}" controls></video>`;
                    }
                    
                    const removeBtn = document.createElement('button');
                    removeBtn.className = 'remove-btn';
                    removeBtn.innerHTML = '√ó';
                    removeBtn.onclick = () => {
                        previewItem.remove();
                        newsData.media = newsData.media.filter(m => m.url !== media.url);
                    };
                    
                    previewItem.appendChild(removeBtn);
                    mediaPreview.appendChild(previewItem);
                });
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º newsData
            newsData = {
                title: draft.title,
                content: draft.content,
                hashtags: draft.hashtags,
                category: draft.category,
                is_featured: draft.is_featured,
                is_popular: draft.is_popular,
                media: draft.media.map(media => ({
                    type: media.type,
                    url: media.url,
                }))
            };
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —á–µ—Ä–Ω–æ–≤–∏–∫
            currentDraftId = draft.id;
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            closeDraftsModal();
            
            showNotification('–ß–µ—Ä–Ω–æ–≤–∏–∫ –∑–∞–≥—Ä—É–∂–µ–Ω', 'success');
        }
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –∫–Ω–æ–ø–æ–∫
        function goToHome() {
            window.location.href = '/';
        }
        
        async function logout() {
            try {
                const response = await fetch('/logout');
                if (response.ok) {
                    window.location.href = '/login';
                } else {
                    showNotification('–û—à–∏–±–∫–∞ –≤—ã—Ö–æ–¥–∞', 'error');
                }
            } catch (error) {
                showNotification('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message, 'error');
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ —Ñ–æ—Ä–º—ã
        function clearForm() {
            // –û—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π
            document.getElementById('news-title').value = '';
            document.getElementById('news-content').value = '';
            document.getElementById('hashtags').value = '';
            document.getElementById('news-category').value = 'general';
            document.getElementById('is-featured').checked = false;
            document.getElementById('is-popular').checked = false;
            
            // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–≤—å—é –º–µ–¥–∏–∞
            const mediaPreview = document.getElementById('mediaPreview');
            mediaPreview.innerHTML = '';
            
            // –û—á–∏—Å—Ç–∫–∞ –≥–∞–ª–µ—Ä–µ–π
            document.getElementById('image-gallery').innerHTML = '';
            document.getElementById('video-gallery').innerHTML = '';
            
            // –°–±—Ä–æ—Å –æ–±—ä–µ–∫—Ç–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
            document.getElementById('image-upload').value = '';
            document.getElementById('video-upload').value = '';
            
            // –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–∏
            newsData = {
                title: '',
                content: '',
                hashtags: [],
                media: [],
                category: 'general',
                is_featured: false,
                is_popular: false
            };
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —á–µ—Ä–Ω–æ–≤–∏–∫
            currentDraftId = null;
            
            showNotification('–§–æ—Ä–º–∞ –æ—á–∏—â–µ–Ω–∞', 'success');
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–∞–ª—å–Ω—ã–º –æ–∫–Ω–æ–º —É–¥–∞–ª–µ–Ω–∏—è
        function openDeleteModal() {
            document.getElementById('deleteNewsModal').style.display = 'block';
            loadNewsForDeletion();
        }
        
        function closeModal() {
            document.getElementById('deleteNewsModal').style.display = 'none';
            document.getElementById('deleteConfirmation').style.display = 'none';
        }
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ –æ–±–ª–∞—Å—Ç–∏
        window.onclick = function(event) {
            const modal = document.getElementById('deleteNewsModal');
            if (event.target === modal) {
                closeModal();
            }
            
            const draftsModal = document.getElementById('draftsModal');
            if (event.target === draftsModal) {
                closeDraftsModal();
            }
        }
        
        async function loadNewsForDeletion() {
            try {
                const response = await fetch('/api/get_all_news');
                
                if (!response.ok) {
                    throw new Error(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ${response.status}`);
                }

                allNews = await response.json();
                
                if (!Array.isArray(allNews)) {
                    throw new Error("–û–∂–∏–¥–∞–ª—Å—è –º–∞—Å—Å–∏–≤ –Ω–æ–≤–æ—Å—Ç–µ–π");
                }

                renderNewsList(allNews);
                
            } catch (error) {
                showNotification(error.message, 'error');
                console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π:", error);
            }
        }
        
        function renderNewsList(newsList) {
            const container = document.getElementById('modalNewsContainer');
            container.innerHTML = '';
            
            if (newsList.length === 0) {
                container.innerHTML = '<p>–ù–æ–≤–æ—Å—Ç–µ–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>';
                return;
            }
            
            newsList.forEach(item => {
                const newsItem = document.createElement('div');
                newsItem.className = 'modal-news-item';
                newsItem.dataset.id = item.id;
                
                let badges = '';
                if (item.is_featured) badges += '<span class="featured-badge">–í–∞–∂–Ω–æ–µ</span> ';
                if (item.is_popular) badges += '<span class="popular-badge">–ü–æ–ø—É–ª—è—Ä–Ω–æ–µ</span>';
                
                newsItem.innerHTML = `
                    <h3>${item.title}</h3>
                    <p>${item.content.substring(0, 100)}${item.content.length > 100 ? '...' : ''}</p>
                    <small>${item.created_at} ${badges}</small>
                `;
                
                newsItem.addEventListener('click', () => {
                    showDeleteConfirmation(item.id, item.title);
                });
                
                container.appendChild(newsItem);
            });
        }
        
        function filterNews() {
            const searchTerm = document.getElementById('newsSearch').value.toLowerCase();
            const filteredNews = allNews.filter(item => 
                item.title.toLowerCase().includes(searchTerm)
            );
            renderNewsList(filteredNews);
        }
        
        function showDeleteConfirmation(newsId, title) {
            selectedNewsId = newsId;
            document.getElementById('confirmationTitle').textContent = title;
            document.getElementById('deleteConfirmation').style.display = 'block';
            
            // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ —ç–ª–µ–º–µ–Ω—Ç—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
            document.getElementById('deleteConfirmation').scrollIntoView({behavior: 'smooth'});
        }
        
        function cancelDelete() {
            document.getElementById('deleteConfirmation').style.display = 'none';
            selectedNewsId = null;
        }
        
        async function confirmDelete() {
            if (!selectedNewsId) return;
            
            try {
                const response = await fetch(`/api/delete_news/${selectedNewsId}`, {
                    method: 'DELETE'
                });
                
                if (response.ok) {
                    showNotification('–ù–æ–≤–æ—Å—Ç—å —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞!', 'success');
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–∫–∏
                    loadNewsForDeletion(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
                    loadNews(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–∏—Å–æ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                    
                    // –°–∫—Ä—ã–≤–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
                    cancelDelete();
                } else {
                    const error = await response.json();
                    showNotification(error.message || '–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏', 'error');
                }
            } catch (error) {
                showNotification('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message, 'error');
            }
        }

        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π
        async function loadNews() {
            try {
                const response = await fetch('/api/get_all_news');
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                
                if (!Array.isArray(data)) {
                    throw new Error("–û–∂–∏–¥–∞–ª—Å—è –º–∞—Å—Å–∏–≤ –Ω–æ–≤–æ—Å—Ç–µ–π");
                }

                const container = document.getElementById('newsContainer');
                container.innerHTML = '';
                
                data.forEach(item => {
                    const newsItem = document.createElement('div');
                    newsItem.className = 'news-item';
                    
                    let badges = '';
                    if (item.is_featured) badges += '<span class="featured-badge">‚òÖ –í–∞–∂–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ</span> ';
                    if (item.is_popular) badges += '<span class="popular-badge">üî• –ü–æ–ø—É–ª—è—Ä–Ω–æ–µ</span>';
                    
                    newsItem.innerHTML = `
                        <div>
                            <h3>${item.title}</h3>
                            <p>${item.content}</p>
                            <div>–ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${getCategoryName(item.category)} ${badges}</div>
                            <small>${item.created_at}</small>
                        </div>
                        <button class="red-btn" onclick="deleteNewsFromList(${item.id})">–£–¥–∞–ª–∏—Ç—å</button>
                    `;
                    container.appendChild(newsItem);
                });

            } catch (error) {
                showNotification(error.message, 'error');
                console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π:", error);
            }
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
        async function deleteNewsFromList(newsId) {
            if (!confirm('–£–¥–∞–ª–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å?')) return;

            try {
                const response = await fetch(`/api/delete_news/${newsId}`, {
                    method: 'DELETE'
                });
                
                if (response.ok) {
                    showNotification('–ù–æ–≤–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–∞!', 'success');
                    loadNews();
                } else {
                    const error = await response.json();
                    showNotification(error.message || '–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è', 'error');
                }
            } catch (error) {
                showNotification('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message, 'error');
            }
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        loadNews();
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Å–º–µ–Ω—ã —Ç–µ–º—ã
        document.getElementById('themeToggle').addEventListener('click', () => {
            document.body.classList.toggle('dark-theme');
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–º—ã –≤ localStorage
            const theme = document.body.classList.contains('dark-theme') ? 'dark' : 'light';
            localStorage.setItem('theme', theme);
        });

        // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–º—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        if (localStorage.getItem('theme') === 'dark') {
            document.body.classList.add('dark-theme');
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
        document.getElementById('image-upload').addEventListener('change', handleMediaUpload);
        document.getElementById('video-upload').addEventListener('change', handleMediaUpload);

        function handleMediaUpload(e) {
            const files = Array.from(e.target.files);
            files.forEach(file => {
                const reader = new FileReader();
                reader.onload = (event) => {
                    const previewItem = createPreviewItem(file, event.target.result);
                    document.getElementById('mediaPreview').appendChild(previewItem);
                    newsData.media.push({
                        type: file.type.split('/')[0],
                        url: event.target.result,
                        file: file
                    });
                };
                reader.readAsDataURL(file);
            });
        }

        function createPreviewItem(file, url) {
            const container = document.createElement('div');
            container.className = 'preview-item';
            
            const mediaElement = file.type.startsWith('image') 
                ? document.createElement('img') 
                : document.createElement('video');
            mediaElement.src = url;
            mediaElement.controls = true;

            const removeBtn = document.createElement('button');
            removeBtn.className = 'remove-btn';
            removeBtn.innerHTML = '√ó';
            removeBtn.onclick = () => removeMediaItem(container, url);

            container.appendChild(mediaElement);
            container.appendChild(removeBtn);
            return container;
        }

        function removeMediaItem(element, url) {
            element.remove();
            newsData.media = newsData.media.filter(item => item.url !== url);
        }

        // –§—É–Ω–∫—Ü–∏–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        async function publishNews() {
            const title = document.getElementById('news-title').value;
            const content = document.getElementById('news-content').value;
            const hashtags = document.getElementById('hashtags').value;
            const category = document.getElementById('news-category').value;
            const isFeatured = document.getElementById('is-featured').checked;
            const isPopular = document.getElementById('is-popular').checked;

            // –í–∞–ª–∏–¥–∞—Ü–∏—è
            if (!title || !content) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è!', 'error');
                return;
            }

            const formData = new FormData();
            formData.append('title', title);
            formData.append('content', content);
            formData.append('hashtags', hashtags);
            formData.append('category', category);
            formData.append('is_featured', isFeatured);
            formData.append('is_popular', isPopular);

            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤
            newsData.media.forEach(media => {
                if (media.file) {
                    formData.append('media', media.file);
                }
            });

            try {
                const response = await fetch('/api/publish_news', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();
                if (response.ok) {
                    showNotification('–ù–æ–≤–æ—Å—Ç—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞!', 'success');
                    
                    // –£–¥–∞–ª—è–µ–º —Ç–µ–∫—É—â–∏–π —á–µ—Ä–Ω–æ–≤–∏–∫, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
                    if (currentDraftId) {
                        const drafts = JSON.parse(localStorage.getItem('drafts')) || [];
                        const updatedDrafts = drafts.filter(d => d.id !== currentDraftId);
                        localStorage.setItem('drafts', JSON.stringify(updatedDrafts));
                        currentDraftId = null;
                    }
                    
                    clearForm();
                    loadNews(); // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π
                } else {
                    showNotification(result.error || '–û—à–∏–±–∫–∞', 'error');
                }
            } catch (error) {
                showNotification('–°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç', 'error');
            }
        }
        
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.className = `notification ${type} show`;
            notification.textContent = message;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }
        
        async function checkSpelling() {
            const title = document.getElementById('news-title').value;
            const content = document.getElementById('news-content').value;
            
            if (!title && !content) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏', 'error');
                return;
            }

            try {
                // –û–±—ä–µ–¥–∏–Ω—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
                const textToCheck = `${title}\n\n${content}`;
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ API –Ø–Ω–¥–µ–∫—Å.–°–ø–µ–ª–ª–µ—Ä–∞
                const response = await fetch('https://speller.yandex.net/services/spellservice.json/checkText', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: new URLSearchParams({
                        text: textToCheck,
                        lang: 'ru',
                        options: '518' // 512 (IGNORE_UPPERCASE) + 4 (IGNORE_DIGITS) + 2 (IGNORE_URLS)
                    })
                });

                if (!response.ok) {
                    throw new Error('–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –æ—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏–∏');
                }

                const errors = await response.json();
                
                if (errors.length === 0) {
                    showNotification('–û—à–∏–±–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ!', 'success');
                    return;
                }

                // –ü—Ä–∏–º–µ–Ω—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                let correctedText = textToCheck;
                let offset = 0;
                
                // –°–æ—Ä—Ç–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –ø–æ –ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –∑–∞–º–µ–Ω—ã
                errors.sort((a, b) => a.pos - b.pos);
                
                for (const error of errors) {
                    const start = error.pos + offset;
                    const end = start + error.len;
                    
                    // –ë–µ—Ä–µ–º –ø–µ—Ä–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
                    const correction = error.s[0] || error.word;
                    
                    // –ó–∞–º–µ–Ω—è–µ–º —Å–ª–æ–≤–æ —Å –æ—à–∏–±–∫–æ–π
                    correctedText = correctedText.substring(0, start) + 
                                   correction + 
                                   correctedText.substring(end);
                    
                    // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º —Å–º–µ—â–µ–Ω–∏–µ –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–º–µ–Ω
                    offset += correction.length - error.len;
                }

                // –†–∞–∑–¥–µ–ª—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
                const [correctedTitle, ...contentParts] = correctedText.split('\n\n');
                const correctedContent = contentParts.join('\n\n');
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–ª—è —Ñ–æ—Ä–º—ã
                document.getElementById('news-title').value = correctedTitle;
                document.getElementById('news-content').value = correctedContent;
                
                showNotification(`–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ ${errors.length} –æ—à–∏–±–æ–∫`, 'success');
                
            } catch (error) {
                console.error('Spell check error:', error);
                showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –æ—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏–∏: ' + error.message, 'error');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
        async function addEvent() {
            const title = document.getElementById('event-title').value;
            const description = document.getElementById('event-description').value;
            const date = document.getElementById('event-date').value;
            const location = document.getElementById('event-location').value;

            if (!title || !description || !date || !location) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!', 'error');
                return;
            }

            try {
                const response = await fetch('/api/add_event', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        title,
                        description,
                        date,
                        location
                    })
                });

                if (response.ok) {
                    showNotification('–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ!', 'success');
                    // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
                    document.getElementById('event-title').value = '';
                    document.getElementById('event-description').value = '';
                    document.getElementById('event-date').value = '';
                    document.getElementById('event-location').value = '';
                } else {
                    const error = await response.json();
                    showNotification(error.error || '–û—à–∏–±–∫–∞', 'error');
                }
            } catch (error) {
                showNotification('–°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç', 'error');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function getCategoryName(category) {
            const categories = {
                'general': '–û–±—â–∏–µ',
                'academic': '–ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–µ',
                'student_life': '–°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∞—è –∂–∏–∑–Ω—å',
                'sport': '–°–ø–æ—Ä—Ç',
                'culture': '–ö—É–ª—å—Ç—É—Ä–∞',
                'research': '–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è',
                'announcements': '–û–±—ä—è–≤–ª–µ–Ω–∏—è'
            };
            return categories[category] || category;
        }
    </script>
</body>
</html>